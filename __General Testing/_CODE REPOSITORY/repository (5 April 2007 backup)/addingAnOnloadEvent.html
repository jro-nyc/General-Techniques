<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
	<title>ONLOAD POPUP TEST - take our onload event top of the existing onload event</title>
</head>

<body onload="alert('First, I have an existing onload event that triggers this silly alert');">
<!-- ON UNLOAD EVENT - 	 Here I generate a popup on unload.  When I do not have control of the body tag -->
<script>
function doPop(){
var popunder=window.open('','name','height=440,width=520');
popunder.document.write('<html>');
popunder.document.write('<body>');
popunder.document.write('<title>Created an onload event to generate this popup</title>');
popunder.document.write('<div align="center" style="background-color:FFFF33;color:CC0000;font-weight:bold;">ONLOAD POPUP TEST!!!</div><div><img src="https://www.quickenloans.com/media/image/ql/optimost/control/sectionn_1.gif"></div><div align="center" style="background-color:FFFF33;color:CC0000;font-weight:bold;">ONLOAD POPUP TEST!!!</div>');
popunder.document.write('</body>');
popunder.document.write('</html>');
alert('Next, I trigger my own event, which is tacked on to the existing one - this popup and an alert');
//popunder.blur();
}
</SCRIPT>

<script language="javascript" type="text/javascript">
//here is the code that adds teh onload event onto the existing chain of onload events, and call the new event, 
//which in this case is the doPop() function
addLoadEvent( function(){
	doPop();
});
function addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} 
	else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}
</script>


</body>
</html>
