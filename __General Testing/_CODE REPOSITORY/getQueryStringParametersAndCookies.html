<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body>
<div style="width: 490px; background-color: #000000; color: #FFFF00;padding:8px;border:4px solid brown;">
<strong>Query String Parameters and Cookies</strong> - How do we get them?</strong><br><br>   
Ok, javascript 101, pretty self-explantory.<br/><hr/ style="color:#FFFF00;">
For <strong>Query String Parameters</strong>, just add parameters to the URL above, hit refresh,  and away you go. You will get an alert for each parameter.<br/><br/>
Just remove the code you need to implement it on your end.<br/><hr/ style="color:#FFFF00;">
For <strong>Cookies</strong>, I have code to get and set a <strong><u>specific</u></strong> cookie.  Just enter it on the line below and see. 
The <strong>getCookies</strong> function gets all the cookies, and then checks to see if they one you requested is
on the list. Play around and add cookies just to see that it works.  I would also suggest going to the cookies folder
on your PC to verify I'm not just using smoke and mirrors<br/><br/>
If you need to get all cookies, you can obviously use the <strong>getCookies</strong> code to get all the cookies.
</div>
<form onsubmit="return false;" >
<table cellpadding="0" cellspacing="0" style="padding:2px;">
	<tr><td style="border-right:2px solid red;border-left:2px solid red;border-top:2px solid red;">Get the following Cookie</td><td>Set the following Cookie</td><td>To the following value</td></tr>
	<tr><td style="border-right:2px solid red;border-left:2px solid red;"><input type="text" value="" name="getC"></td><td><input type="text" value="" name="setC"></td><td><input type="text" value="" name="setCval"></td></tr>
	<tr><td style="border-right:2px solid red;border-left:2px solid red;border-bottom:2px solid red;" align="center"><button type="submit" name="getSub" onclick="checkCookies('get');">Get the Cookie</button></td><td colspan="2" align="center"><button type="submit" name="setSub" onclick="checkCookies('set');">Set the Cookie</button></td></tr>
</table>


</form>
<script language="javascript">
function getParams(){
	var query  = unescape(top.location.search.substring(1)).split('&');
	var params = new Object();

	for (i = 0; i < query.length; i++)	{
		var tmp = query[i].split('=');
		params[tmp[0]] = tmp[1];
	}
	if(query.length>0) return params;
	else return null;
}
allQS = getParams();
for(n in allQS) if(n != "") alert(allQS[n] + ' has the value ' + n);

function checkCookies(daAction){
	if(daAction=='get'){
		getDaCookies(document.forms[0].getC.value);
	}
	else{
		if(document.forms[0].setC.value !='' && document.forms[0].setCval.value != '') {
		setDaCookies(document.forms[0].setC.value,document.forms[0].setCval.value);
	}

}

function setDaCookies(cookieName,cookieValue){
	document.cookie= cookieName + "=" + escape(cookieValue) + "; path=/;";
		document.cookie="CookieName=leCookie" + "; path=/; domain=.domainName.com;";
	}	
}
function getDaCookies(cookieValue){
var _opcookies = new Object;
	if (document.cookie.length > 0) { var _ca = document.cookie.split("\;");
	for (var i=0; i < _ca.length; i++) { var _cv = _ca[i].split("=");
	while (_cv[0].substring(0, 1) == " ") _cv[0] = _cv[0].substring(1, _cv[0].length);
	_opcookies[_cv[0]] = unescape(_cv[1]); } }
	if(_opcookies[cookieValue] != null) {alert(cookieValue + '=' + _opcookies[cookieValue]);return _opcookies[cookieValue];}
	else {alert('Cookie not set');return null;} 	
}
</script>


</body>
</html>
